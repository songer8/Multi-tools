{"ast":null,"code":"var _jsxFileName = \"/Users/songer/projects/my-app/src/components/dictionary/Dictionary.jsx\";\nimport React, { Component } from 'react';\nimport MD5 from './js-sdk/md5';\nimport fetchJsonp from 'fetch-jsonp';\nimport \"./dictionary.scss\";\n\nclass Dictionary extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n\n    this.genTranslate = () => {\n      var query = this.dicInputRef.current.value;\n      var from = 'zh';\n      var to = 'en';\n      var english = new RegExp(\"[A-Za-z]+\");\n\n      if (english.test(query)) {\n        from = 'en';\n        to = 'zh';\n      }\n\n      var appid = '20200709000516150';\n      var key = 'n3Ts5qaI2yDcgZTbvXsV';\n      var salt = new Date().getTime(); // var query = this.dicInputRef.current.value;\n      // 多个query可以用\\n连接  如 query='apple\\norange\\nbanana\\npear'\n\n      var str1 = appid + query + salt + key;\n      var sign = MD5(str1);\n      fetchJsonp(`http://api.fanyi.baidu.com/api/trans/vip/translate?q=${query}&appid=${appid}&salt=${salt}&from=${from}&to=${to}&sign=${sign}`).then(function (response) {\n        return response.json();\n      }).then(json => {\n        console.log(json);\n        let result = json.trans_result[0].dst;\n        this.setState({\n          result: result\n        });\n      }).catch(function (ex) {\n        console.log('parsing failed', ex);\n      });\n    };\n\n    this.dicInputRef = React.createRef();\n    this.state = {\n      result: ''\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"translate\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 16\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dic-wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"dicInput\",\n      ref: this.dicInputRef,\n      placeholder: \"\\u5728\\u6B64\\u8F93\\u5165\\u8981\\u7FFB\\u8BD1\\u7684\\u5355\\u8BCD\\u6216\\u8005\\u6587\\u5B57\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"clickDicBtn\",\n      onClick: this.genTranslate,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 17\n      }\n    }, \"\\u7FFB\\u8BD1\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dicOutput\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 13\n      }\n    }, this.state.result));\n  }\n\n}\n\nexport default Dictionary;","map":{"version":3,"sources":["/Users/songer/projects/my-app/src/components/dictionary/Dictionary.jsx"],"names":["React","Component","MD5","fetchJsonp","Dictionary","constructor","props","state","genTranslate","query","dicInputRef","current","value","from","to","english","RegExp","test","appid","key","salt","Date","getTime","str1","sign","then","response","json","console","log","result","trans_result","dst","setState","catch","ex","createRef","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,GAAP,MAAgB,cAAhB;AACA,OAAOC,UAAP,MAAuB,aAAvB;AAEA,OAAO,mBAAP;;AAEA,MAAMC,UAAN,SAAyBH,SAAzB,CAAmC;AAE/BI,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AADe,SADnBC,KACmB,GADX,EACW;;AAAA,SAMnBC,YANmB,GAMJ,MAAM;AACjB,UAAIC,KAAK,GAAG,KAAKC,WAAL,CAAiBC,OAAjB,CAAyBC,KAArC;AACA,UAAIC,IAAI,GAAG,IAAX;AACA,UAAIC,EAAE,GAAG,IAAT;AAEA,UAAIC,OAAO,GAAG,IAAIC,MAAJ,CAAW,WAAX,CAAd;;AACA,UAAID,OAAO,CAACE,IAAR,CAAaR,KAAb,CAAJ,EAAyB;AACrBI,QAAAA,IAAI,GAAG,IAAP;AACAC,QAAAA,EAAE,GAAG,IAAL;AACH;;AAED,UAAII,KAAK,GAAG,mBAAZ;AACA,UAAIC,GAAG,GAAG,sBAAV;AACA,UAAIC,IAAI,GAAI,IAAIC,IAAJ,EAAD,CAAWC,OAAX,EAAX,CAbiB,CAcjB;AACA;;AAEA,UAAIC,IAAI,GAAGL,KAAK,GAAGT,KAAR,GAAgBW,IAAhB,GAAuBD,GAAlC;AACA,UAAIK,IAAI,GAAGtB,GAAG,CAACqB,IAAD,CAAd;AAEApB,MAAAA,UAAU,CAAE,wDAAuDM,KAAM,UAASS,KAAM,SAAQE,IAAK,SAAQP,IAAK,OAAMC,EAAG,SAAQU,IAAK,EAA9H,CAAV,CACKC,IADL,CACU,UAAUC,QAAV,EAAoB;AACtB,eAAOA,QAAQ,CAACC,IAAT,EAAP;AACH,OAHL,EAGOF,IAHP,CAGaE,IAAD,IAAU;AACdC,QAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACA,YAAIG,MAAM,GAAGH,IAAI,CAACI,YAAL,CAAkB,CAAlB,EAAqBC,GAAlC;AACA,aAAKC,QAAL,CAAc;AAAEH,UAAAA,MAAM,EAAEA;AAAV,SAAd;AACH,OAPL,EAOOI,KAPP,CAOa,UAAUC,EAAV,EAAc;AACnBP,QAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8BM,EAA9B;AACH,OATL;AAUH,KApCkB;;AAEf,SAAKzB,WAAL,GAAmBV,KAAK,CAACoC,SAAN,EAAnB;AACA,SAAK7B,KAAL,GAAa;AAAEuB,MAAAA,MAAM,EAAE;AAAV,KAAb;AACH;;AAkCDO,EAAAA,MAAM,GAAG;AACL,wBAAO;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACH;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAO,MAAA,IAAI,EAAC,MAAZ;AAAmB,MAAA,SAAS,EAAC,UAA7B;AAAwC,MAAA,GAAG,EAAE,KAAK3B,WAAlD;AAA+D,MAAA,WAAW,EAAC,sFAA3E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,eAEI;AAAQ,MAAA,SAAS,EAAC,aAAlB;AAAgC,MAAA,OAAO,EAAE,KAAKF,YAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFJ,CADG,eAKH;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK,KAAKD,KAAL,CAAWuB,MADhB,CALG,CAAP;AASH;;AAlD8B;;AAqDnC,eAAe1B,UAAf","sourcesContent":["import React, { Component } from 'react';\nimport MD5 from './js-sdk/md5';\nimport fetchJsonp from 'fetch-jsonp'\n\nimport \"./dictionary.scss\";\n\nclass Dictionary extends Component {\n    state = {}\n    constructor(props) {\n        super(props);\n        this.dicInputRef = React.createRef();\n        this.state = { result: '' }\n    }\n\n    genTranslate = () => {\n        var query = this.dicInputRef.current.value;\n        var from = 'zh';\n        var to = 'en';\n\n        var english = new RegExp(\"[A-Za-z]+\");\n        if (english.test(query)) {\n            from = 'en';\n            to = 'zh';\n        }\n\n        var appid = '20200709000516150';\n        var key = 'n3Ts5qaI2yDcgZTbvXsV';\n        var salt = (new Date).getTime();\n        // var query = this.dicInputRef.current.value;\n        // 多个query可以用\\n连接  如 query='apple\\norange\\nbanana\\npear'\n\n        var str1 = appid + query + salt + key;\n        var sign = MD5(str1)\n\n        fetchJsonp(`http://api.fanyi.baidu.com/api/trans/vip/translate?q=${query}&appid=${appid}&salt=${salt}&from=${from}&to=${to}&sign=${sign}`)\n            .then(function (response) {\n                return response.json()\n            }).then((json) => {\n                console.log(json);\n                let result = json.trans_result[0].dst;\n                this.setState({ result: result });\n            }).catch(function (ex) {\n                console.log('parsing failed', ex)\n            })\n    }\n\n    render() {\n        return <div className=\"translate\">\n            <div className=\"dic-wrapper\">\n                <input type=\"text\" className=\"dicInput\" ref={this.dicInputRef} placeholder=\"在此输入要翻译的单词或者文字\" />\n                <button className=\"clickDicBtn\" onClick={this.genTranslate} >翻译</button>\n            </div>\n            <div className=\"dicOutput\">\n                {this.state.result}\n            </div>\n        </div>;\n    }\n}\n\nexport default Dictionary;"]},"metadata":{},"sourceType":"module"}